app:
  title: Backstage
  baseUrl: https://backstage.gcp.osinfra.io

backend:
  baseUrl: https://backstage.gcp.osinfra.io
  listen: ':7007'

  database:
    client: pg
    connection:
      host: localhost
      port: 5432
      user: ${POSTGRES_USER}
      password: ${POSTGRES_PASSWORD}

auth:
  providers:
    gcpIap:
      audience: '/projects/1036446604184/global/backendServices/UNKNOWN'
      signIn:
        resolvers:
          - resolver: emailMatchingUserEntityProfileEmail

  permissions:
    rules:
      - name: backstage-admin-rule
        resourceType: all
        policy: allow
        conditions:
          - type: group
            group: admins

catalog:
  locations:
    - type: file
      target: ./examples/admin.yaml
      rules:
        - allow: [User, Group]
